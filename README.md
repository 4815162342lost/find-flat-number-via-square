# find-flat-number-via-square
**Узкоспециализированный скрипт, позволяющий найти квартиры с нужной площадью в конкретном доме (или даже этаже\в подъезде)**

Пример запуска:

`/tmp/1.py --min_flat_number=133 --max_flat_number=216 --max_flat_number_in_entrance=144 --floors_number=9 --flats_in_floor=4 --main_kadastr_num="16:50:110805:" --min_last_kadastr_num=3011 --max_last_kadastr_num=3300 --min_area=32 --max_area=34 --street_name="Республика Татарстан, г Казань, пр-кт Ямашева, д 78"`

Скрипт необходимо запсукать с параметрами:
```min_flat_number -- номер квартиры, с которого надо начать поиск (если хотите просмотреть все квартиры в доме, то введите 1)
max_flat_numbe -- номер квартиры, после которого надо закончить поиск (например, если хотите просмотреть все квартиры в доме и всего 420 квартир в доме, введите 420)
max_flat_number_in_entrance -- максимальный номер квартиры в первом просматриваемом подъезде. Например, мыначинаем поиск с 4 подъезда и просматриваем последние 3 этажа (7, 8 и 9). В 4 подъезде расположены квартиры с 109 по 144. Но с 7 по 9 этаж расположены квартиры 133-144. Значит, min_flat_number = 133,  
max_flat_number_in_entrance = 144. Если хотите просмотреть весь дом и все подъезды и в первом подъезде 36 квартир, то max_flat_number_in_entrance = 36
floors_number -- кол-во этажей в доме
flats_in_floor -- кол-во квартир на площадке (на одном этаже в одном подъезде). Если дом старый, то обычно 4
main_kadastr_num -- набор цифр из кадастрового номера, кроме последних 4-х цифр
min_last_kadastr_num -- берём последние 4 цифры с кадастрового номера, и пишем число, с которого начианем поиск
max_last_kadastr_num -- максмальные последние 4 числа с кадастрового номера, после достижения которых необходимо остановить поиск
min_area -- минимальная площадь квартиры
max_area -- максимальная площадь квартиры
street_name -- название улицы и номер дома, в котором проживает наша жертва
```

#####Пример

Жертва выложила фотографию из окна. По фото мы понимаем, что жертва проживает в г. Казани на Ямашева, д 78 (если знаете город, то найти будет не сложно, смотрите Яндекс.Панорамы или Гугл.Панорамы). По фото видно, что жертва живёт на верхних этажах и в середине дома (4, 5 и 6 подъезды). Далее нам необходимо узнать номера квартир (диапазон), в которых может жить наша жертва. Для этого воспользуйтесь [2gis](https://2gis.ru/kazan/search/%D1%8F%D0%BC%D0%B0%D1%88%D0%B5%D0%B2%D0%B0%2078/geo/2956122910646110/49.141339%2C55.827638?m=49.141793%2C55.827757%2F18.98) и вручную посчитайте номер максимально возможной квартиры и минимально возможной. 2gis отображает нумерацию квартир в подъезде, просчитать несложно. В моём случае макимально возможная квартира это 216 (параметр max_flat_number), а минимальная 133 (min_flat_number). Потом смотрим этажность дома, в моём случае в доме 9 этажей (floors_number). 4 квартиры на этаж (flats_in_floor).
    
Далее находим кадастровый номер первой квартиры в доме:
https://www.avito.ru/proverka-kvartir/preview/16:50:110805:3011

Видим номер: 16:50:110805:3011
Последние 4 цифры меняются, но не по порядку, и в этом главная проблема. Поэтому параметр main_kadastr_num у нас будет 16:50:110805:
Первая квартира в доме имеет кадастровый номер, заканчивающийся на 3011. Это будет min_last_kadastr_num.

До какого номера искать (параметр max_last_kadastr_num)? Однозначного ответа нет, подбираем наугад. Например, берём количество квартир в доме и умножаем на 1.5. Я пока не очень понял, как работать с кадастровыми номерами, они идут не по порядку.

street_name -- полный адрес дома. Просто переходим по ссылке первой квартиры в доме и копируем всё, кроме номера квартиры. Ссылка выше.
